apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: myapp-argocd
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/yotamdavid/ferari_finel.git
    targetRevision: HEAD
    path: k8s_project
  destination:
    server: https://kubernetes.default.svc
    namespace: default
  syncPolicy:
    automated:
      prune: true # אופציונלי - להסיר משארית יישום כשהוא אינו קיים ב-Git
      selfHeal: true # אופציונלי - לשקם יישום כשהוא נפל בקלאסטר
    automated:
      prune: true
      selfHeal: true
    hooks:
      - name: sync-on-commit
        beforeSync:
          resources: []
